[
  <% @recipes.each do |r| %>
  {
    "id": <%= r.id %>, 
    "name" : <%= r.name.to_json.html_safe %>,
    "content": <%= r.content.to_json.html_safe %>,
    "ingredients": <%= r.ingredients.to_json.html_safe %>
    "can_edit": <%= can? :edit, r %>,
    "is_liked": <%= current_user.likes?(r) %>,
    "is_favorite": <%= current_user.favorite?(r) %>,
    "history": <%= current_user.histories.for(r).to_json.html_safe %>,
    "author": {
      "id": <%= r.user.id %>,
      "name": "<%= r.user.name %>",
      "email": "<%= r.user.email %>",
      "age": "<% r.user.age %>",
      "is_followed": <%= current_user.following?(r.user) %>,
      "is_follower": <%= current_user.followed_by?(r.user) %>
    }
  },
  <% end %>
  {}
]